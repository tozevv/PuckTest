<html>
 <head>
   <script src="https://www.puck-js.com/puck.js"></script>
   <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

   <script type="text/javascript">    

    var interval = undefined;


    function puckClicked() {
      console.log("clicked");
      stop();
      setTimeout(start, 10000);
    }

    function toggleEnabled() {
      if (interval) {
        stop();
      } else {
        start(puckClicked);
      }
    }

    function start() {
      $(button).html("Stop");
      interval = setInterval(function() {
          Puck.eval("BTN.read()",function(pressed) { 
            if (pressed) {
              puckClicked();
            }
          })
      }, 100);
    }

    function stop() {
      clearInterval(interval);
      interval = undefined;
      $(button).html("Start!");
    }
  </script>
 </head>
 <body>
  <h1>K8s test 9</h1>
 
  <button id="button" onClick="toggleEnabled()">Start!</button>

 </body>
</html>
